<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>xChat -Responsive Multi-purpose HTML5 Template</title>
    <meta name="description" content="Cabe - Responsive Multi-purpose HTML5 Template">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- STYLESHEETS -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css" media="all">
    <link rel="stylesheet" href="css/owl.theme.default.min.css" type="text/css" media="all">

    <link rel="stylesheet" href="css/themify-icons.css">

    <link rel="stylesheet" href="main.min.css" type="text/css" media="all">


    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<!-- page tour modal -->

<div class="modal fade show" id="pagetour">
    <div class="modal-dialog modal-lg modal-md modal-dialog-centered modal-dialog-zoom">
        <div class="modal-content text-center" style="background-image: url(images/bg-2.png);">
            <div class="owl-carousel owl-theme slider-1">
                <div class="item">
                    <img src="images/bg-1.jpg" alt="modal">
                    <h4 class="text-primary">æ¬¢è¿æ‚¨æ¥åˆ°æŸä¸çŸ¥åèŠå¤©å®¤!</h4>
                    <button type="button" class="btn btn-link tour-close-btn" data-dismiss="modal"
                            aria-label="Close">è·³è¿‡
                    </button>
                    <button type="button" class="btn btn-primary start-tour">ç»§ç»­</button>

                </div>
                <div class="item">
                    <img src="images/bg-1.jpg" alt="modal">
                    <h4 class="text-primary">åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥ä¸æ‚¨çš„æœ‹å‹ç•…èŠ!</h4>
                    <button type="button" class="btn btn-link tour-close-btn" data-dismiss="modal"
                            aria-label="Close">è·³è¿‡
                    </button>
                    <button type="button" class="btn btn-primary next-tour">ç»§ç»­</button>
                </div>
                <div class="item">
                    <img src="images/bg-1.jpg" alt="modal">
                    <h4 class="text-primary">å¸Œæœ›æ‚¨å–œæ¬¢æˆ‘ä»¬çš„æŸä¸çŸ¥åèŠå¤©å®¤!</h4>
                    <button type="button" class="btn btn-primary start-tour tour-close-btn">å¤ªæ£’äº†!</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- page tour modal -->

<!-- add friend modal -->
<div class="modal fade show" id="addfriend">
    <div class="modal-dialog modal-md modal-md modal-dialog-centered modal-dialog-zoom">
        <div class="modal-content pb-0 d-flex justify-content-between text-center">
            <div class="modal-content pb-0">
                <div class="modal-header add-friend">
                    <h5 class="modal-title">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                             stroke-linejoin="round" class="feather feather-user-plus mr-2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                        Add Friends
                    </h5>
                    <button type="button" class="close" data-dismiss="addfriend" aria-label="close"
                            id="addfriend-close">
                        <i class="ti-close text-white"></i>
                    </button>
                </div>
                <div class="modal-body add-friend pl-4 pr-4">
                    <div class="alert alert-info text-left">Send invitations to friends.</div>
                    <form>
                        <div class="form-group text-left">
                            <label for="emails" class="col-form-label">Email addresses</label>
                            <input type="text" class="form-control" id="emails">
                        </div>
                        <div class="form-group text-left">
                            <label for="message" class="col-form-label">Invitation message</label>
                            <textarea class="form-control" id="message"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer add-friend">
                    <button type="button" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- add friend modal -->

<!-- main wrapper -->
<div class="main-wrapper">
    <!-- navigation -->
    <nav class="navigation">
        <div class="container pl-0 pr-0">
            <div class="nav-content">
                <ul>
                    <li class="logo d-none d-xl-block d-lg-block"><a href="#"><img src="images/logo.png"
                                                                                   alt="logo"></a></li>
                    <li><a href="#" class="active nav-content-bttn" data-tab="chats" id="chat-list"><span
                            class="circle-icon bg-warning"></span><i class="ti-comments"></i></a></li>
                    <li><a href="#" class="nav-content-bttn" data-tab="friends" id="friend-list"><span
                            class="circle-icon bg-danger"></span><i class="ti-user"></i></a></li>
                    <li class="d-none d-xl-block d-lg-block night-mode"><a href="#"><i
                            class="ti-flickr-alt"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- navigation -->
    <div class="right-content">
        <div class="left-sidebar">

            <div class="chat-header">
                <div class="chat-header-user">
                    <figure class="avatar">
                        <a href="#" class="profile-detail-bttn"><img src="images/user-7.png" class="rounded-circle"
                                                                     alt="image"></a>
                    </figure>
                    <div>
                        <h5 class="mt-0 mb-0" id="left-top-name">User</h5>
                        <small class="text-success" id="left-top-email">Email</small>
                    </div>
                </div>
                <div class="chat-header-action nav-content">
                    <ul class="list-inline mb-1 mt-3">
                        <li class="list-inline-item mr-3"><a href="../login/login.html" id="log-out"><i
                                class="ti-lock"></i></a>
                        </li>
                        <li class="list-inline-item mr-3"><a href="#" class="nav-content-bttn"
                                                             data-tab="settings"><i class="ti-settings"></i></a></li>
                    </ul>
                </div>
            </div>

            <div class="sidebar active" id="chats">
                <div class="text-left mb-1 mt-0">
                    <h2 class="title-text"><b>æœ€è¿‘</b> èŠå¤©åˆ—è¡¨</h2>
                </div>
                <div class="form-content">
                    <form action="#" class="mb-3 mt-3">
                        <label>
                            <input type="text" class="form-control" placeholder="æœç´¢æœ€è¿‘èŠå¤©">
                        </label>
                    </form>
                </div>
                <div class="chat-list-content">
                    <ul class="chat-list" id="user-chat-list">

                    </ul>
                </div>
            </div>
            <div class="sidebar" id="friends">
                <div class="text-left mb-2 mt-3">
                    <h2 class="title-text"><b>å¥½å‹</b> å¥½å‹åˆ—è¡¨ </h2>
                </div>
                <div class="form-content">
                    <form action="#" class="mb-3 mt-1">
                        <label>
                            <input type="text" class="form-control" placeholder="æœç´¢å¥½å‹åˆ—è¡¨">
                        </label>
                    </form>
                </div>
                <div class="chat-list-content">
                    <ul class="chat-list" id="friend-list-area">
                        <li class="chat-list-item">
                            <figure class="avatar user-online">
                                <img src="images/user-2.png" alt="image">
                            </figure>
                            <div class="list-body">
                                <div class="chat-bttn">
                                    <h3 class="mb-1 mt-1" id="friend-name">Hurin Seary</h3>
                                    <p id="friend-motto">test user motto.</p>
                                </div>
                                <!-- <div class="list-action mt-2 text-right">
                                    <a href="#" class="btn-plus dropdown-toggle" data-toggle="dropdown"><i
                                            class="ti-plus"></i></a>
                                    <div class="dropdown-menu dropdown-menu-right">
                                        <a href="#" class="dropdown-item" id="addfriend-bttn">Add friend</a>
                                        <a href="#" class="dropdown-item">Restore</a>
                                        <div class="dropdown-divider"></div>
                                        <a href="#" class="dropdown-item text-danger">Delete</a>
                                    </div>
                                </div> -->
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="sidebar" id="settings">
                <div class="text-left mb-2 mt-3">
                    <h2 class="title-text"><b>è´¦æˆ·</b> è®¾ç½®æ‚¨çš„è´¦æˆ· </h2>
                </div>
                <div class="chat-list-content mb-3 mt-3">
                    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title"><a role="button" data-toggle="collapse"
                                                           data-parent="#accordion" href="#collapseOne"
                                                           aria-expanded="true"
                                                           aria-controls="collapseOne" class="collapsed">æˆ‘çš„èµ„æ–™
                                    <span>ä¿®æ”¹èµ„æ–™</span></a>
                                </h4>
                            </div>
                            <div id="collapseOne" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingOne">
                                <div class="panel-body">
                                    <form action="#" class="mb-3 mt-3">
                                        <label>
                                            <input type="text" class="form-control mb-3" placeholder="ç”¨æˆ·å">
                                        </label>
                                        <label>
                                            <input type="text" class="form-control mb-3" placeholder="é‚®ç®±">
                                        </label>
                                        <label>
                                            <input type="text" class="form-control mb-3" placeholder="ä¸ªæ€§ç­¾å">
                                        </label>
                                        <button>ä¿å­˜</button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingTwo">
                                <h4 class="panel-title"><a role="button" data-toggle="collapse"
                                                           data-parent="#accordion" href="#collapseTwo"
                                                           aria-expanded="true"
                                                           aria-controls="collapseTwo" class="collapsed">éšç§ä¸å®‰å…¨è®¾ç½®
                                    <span>è®¾ç½®éšç§ä¸å®‰å…¨</span></a></h4>
                            </div>
                            <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingTwo">
                                <div class="panel-body">
                                    <form action="#" class="mb-3 mt-3">
                                        <label>
                                            <input type="text" class="form-control mb-3" placeholder="åŸå¯†ç ">
                                        </label>
                                        <label>
                                            <input type="text" class="form-control mb-3" placeholder="æ–°å¯†ç ">
                                        </label>
                                        <label>
                                            <input type="text" class="form-control mb-3" placeholder="é‡ç½®å¯†ç ">
                                        </label>
                                        <button>æäº¤</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="chat-content">
            <!-- chat header -->
            <div class="chat-header">
                <div class="chat-header-user">
                    <figure class="avatar">
                        <img src="images/user-9.png" class="rounded-circle" alt="image">
                    </figure>
                    <div>
                        <h5 class="mt-2 mb-0" id="chatting-user">æ ·ä¾‹ç”¨æˆ·1</h5>
                        <small class="text-success" id="chatting-status">å¯¹æ–¹æ­£åœ¨è¾“å…¥...</small>
                    </div>
                </div>
                <div class="chat-header-action">
                    <ul class="list-inline mb-0 mt-2">
                        <li class="list-inline-item not-mobile"><a href="#" class="bttn-box-round"><i
                                class="ti-microphone"></i></a></li>
                        <li class="list-inline-item not-mobile"><a href="#" class="bttn-box-round"
                                                                   id="videocall-bttn"><i
                                class="ti-video-camera"></i></a></li>
                        <li class="list-inline-item d-xl-none d-lg-none"><a href="#"
                                                                            class="bttn-box-round back-chat-div"><i
                                class="ti-arrow-left"></i></a></li>
                        <li class="list-inline-item">
                            <a href="#" class="bttn-box-round" data-toggle="dropdown"><i
                                    class="ti-more-alt"></i></a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a href="#" class="dropdown-item profile-detail-bttn">ç”¨æˆ·èµ„æ–™</a>
                                <a href="#" class="dropdown-item">ç‰¹åˆ«å…³å¿ƒï¼Ÿ</a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item text-danger">å±è”½è¯¥ç”¨æˆ·</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- chat header -->
            <!-- chat body -->
            <div class="chat-body" style="overflow: hidden;outline: none;">
                <div class="messages-content">
                    <div class="message-item">
                        <div class="message-user">
                            <figure class="avatar">
                                <img src="images/user-9.png" alt="image">
                            </figure>
                            <div>
                                <h5>Byrom Guittet</h5>
                                <div class="time">01:35 PM</div>
                            </div>
                        </div>
                        <div class="message-wrap">I'm fine, how are you ğŸ˜ƒ</div>
                    </div>
                </div>
            </div>
            <!-- chat body -->
            <!-- chat footer -->
            <div class="chat-footer">
                <form action="#">
                    <input type="text" placeholder="è¯·åœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„æ¶ˆæ¯..." id="user-message">
                    <button id="send-message"><img src="images/send.png" alt="send"></button>
                </form>
            </div>
            <!-- chat footer -->
        </div>

        <div class="right-sidebar" style="overflow: hidden;outline: none;">
            <div class="profile-content scroll-profile">
                <header>
                    <h2 class="title-text">ä¸ªäººèµ„æ–™</h2>
                    <a href="#" class="close-icon float-right"><i class="ti-close  text-danger"></i></a>
                </header>
                <div class="text-center mt-4">
                    <figure class="avatar avatar-xl mb-4">
                        <img src="images/user-10.png" class="rounded-circle" alt="image">
                    </figure>
                    <h5 class="mb-0" id="profile-name">James Henry</h5>
                    <small class="text-success" id="profile-email">james43@gmail.com</small>

                    <ul class="social-link list-inline mt-3">
                        <li class="list-inline-item"><a href="#"><i class="ti-facebook bg-facebook"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="ti-twitter-alt bg-twitter"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="ti-google bg-google"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="ti-pinterest bg-pinterest"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="ti-linkedin bg-linkedIn"></i></a></li>
                        <li class="list-inline-item"><a href="#"><i class="ti-github bg-github"></i></a></li>
                    </ul>

                    <ul class="profile-detail list-inline pt-5">
                        <li class="list-block-item text-left">
                            <h6 class="mb-0">è´¦å·</h6>
                            <small id="profile-id"></small>
                        </li>
                        <li class="list-block-item text-left">
                            <h6 class="mb-0">ä¸ªæ€§ç­¾å</h6>
                            <small id="profile-motto"></small>
                        </li>
                        <li class="list-block-item text-left">
                            <h6 class="mb-0">ç­‰çº§</h6>
                            <small id="profile-level"></small>
                        </li>
                        <li class="list-block-item text-left">
                            <h6 class="mb-0">åˆ›å»ºæ—¶é—´</h6>
                            <small id="profile-create-time"></small>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>

</div>
<!-- main wrapper -->

<!-- SCRIPTS -->
<script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.goeasy.io/goeasy-2.2.2.min.js"></script>
<script src="js/plugin.js"></script>
<script src="js/main.min.js"></script>
<script type="text/javascript">
    const requestUrl = "http://localhost:8080/api/v1/user";
    // æŸapiçš„åœ°å€
    const goeasy = GoEasy.getInstance({
        host: "hangzhou.goeasy.io", //è‹¥æ˜¯æ–°åŠ å¡åŒºåŸŸï¼šsingapore.goeasy.io
        appkey: "BC-f0ed0595dbd74b398fdfcac61b1f18d6",
        modules: ['im'] //æ ¹æ®éœ€è¦ï¼Œä¼ å…¥â€˜pubsubâ€™æˆ–'imâ€™ï¼Œæˆ–æ•°ç»„æ–¹å¼åŒæ—¶ä¼ å…¥
    });
    const im = goeasy.im;

    // æ—¶é—´æˆ³è½¬åŒ–
    function add0(m) {
        return m < 10 ? '0' + m : m
    }

    function format(shijianchuo) {
        //shijianchuoæ˜¯æ•´æ•°ï¼Œå¦åˆ™è¦parseIntè½¬æ¢
        var time = new Date(shijianchuo);
        var y = time.getFullYear();
        var m = time.getMonth() + 1;
        var d = time.getDate();
        var h = time.getHours();
        var mm = time.getMinutes();
        var s = time.getSeconds();
        return y + '-' + add0(m) + '-' + add0(d) + ' ' + add0(h) + ':' + add0(mm) + ':' + add0(s);
    }

    $(document).ready(function () {
        $.ajax({
            headers: {
                chattoken: localStorage.getItem("chattoken"),
            },
            url: requestUrl + "/" + localStorage.getItem("userId"),
            type: "GET",
            contentType: "application/json;charset=UTF-8",
            success: function (data) {
                console.log(data)
                $("#left-top-name").text(data.userName)
                $("#left-top-email").text(data.userEmail)
                $("#profile-id").text(localStorage.getItem("userId"))
                $("#profile-name").text(data.userName)
                $("#profile-email").text(data.userEmail)
                $("#profile-motto").text(data.userMotto)
                $("#profile-level").text(data.userLevel)
                $("#profile-create-time").text(data.userCreateTime)
            },
            error: function () {

            }
        })
        // è¿æ¥åˆ°èŠå¤©æœåŠ¡å™¨
        console.log("connect")
        goeasy.connect({
            id: localStorage.getItem("userId"), //pubsubé€‰å¡«ï¼Œimå¿…å¡«
            data: {
                "avatar": "/www/xxx.png",
                "nickname": "TestUser"
            }, //å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œpubsubé€‰å¡«ï¼Œimå¿…å¡«ï¼Œç”¨äºä¸Šä¸‹çº¿æé†’å’ŒæŸ¥è¯¢åœ¨çº¿ç”¨æˆ·åˆ—è¡¨æ—¶ï¼Œæ‰©å±•æ›´å¤šçš„å±æ€§
            onSuccess: function () { //è¿æ¥æˆåŠŸ
                console.log("GoEasy connect successfully.") //è¿æ¥æˆåŠŸ
            },
            onFailed: function (error) { //è¿æ¥å¤±è´¥
                console.log("Failed to connect GoEasy, code:" + error.code + ",error:" + error
                    .content);
            },
            onProgress: function (attempts) { //è¿æ¥æˆ–è‡ªåŠ¨é‡è¿ä¸­
                console.log("GoEasy is connecting", attempts);
            }
        });
    })
    // é€€å‡ºèŠå¤©æœåŠ¡å™¨
    $("#log-out").click(function () {
        console.log("disconnect")
        goeasy.disconnect({
            onSuccess: function () {
                console.log("GoEasy disconnect successfully.") //æ–­å¼€æœåŠ¡å™¨è¿æ¥
            },
            onFailed: function (error) {
                console.log("Failed to disconnect GoEasy, code:" + error.code + ",error:" +
                    error.content); // å¦‚æœä¿å­˜å‡ºé”™çš„è¯ä¹Ÿå¾—è¾“å‡ºé”™è¯¯ç 
            }
        });
    })
    // æš‚æ—¶è·å–èŠå¤©åˆ—è¡¨
    let ifChatListExists = false;
    $("#chat-list").click(function () {
            im.latestConversations({
                onSuccess: function (result) {
                    console.log(result);
                    $("#user-chat-list").html("")
                    $.each(result.content.conversations, function (index, item) {
                        let string = "";
                        if (item.unread == 0) {
                            string = "                        <li class=\"chat-list-item\" id='chat-item'>\n" +
                                "                            <figure class=\"avatar user-online\">\n" +
                                "                                <img src=\"images/user-2.png\" alt=\"image\">\n" +
                                "                            </figure>\n" +
                                "                            <div class=\"list-body\">\n" +
                                "                                <div class=\"chat-bttn\">\n" +
                                "                                    <h3 class=\"mb-0 mt-2\" id='chat-item-userid'>" + item.userId + "</h3>" +
                                "                                    <div>" + item.lastMessage.payload.text + "</div>\n" +
                                "                                </div>\n" +
                                "                                <div class=\"list-action mt-2 text-right\">\n" +
                                "                                    <small class=\"text-primary\">" + format(item.lastMessage.timestamp) + "</small>\n" +
                                "                                </div>\n" +
                                "                            </div>\n" +
                                "                        </li>"
                        } else {
                            string = "                        <li class=\"chat-list-item\" id='chat-item'>\n" +
                                "                            <figure class=\"avatar user-online\">\n" +
                                "                                <img src=\"images/user-2.png\" alt=\"image\">\n" +
                                "                            </figure>\n" +
                                "                            <div class=\"list-body\">\n" +
                                "                                <div class=\"chat-bttn\">\n" +
                                "                                    <h3 class=\"mb-0 mt-2\" id='chat-item-userid'>" + item.userId + "</h3>" +
                                "                                    <div>" + item.lastMessage.payload.text + "</div>\n" +
                                "                                </div>\n" +
                                "                                <div class=\"list-action mt-2 text-right\">\n" +
                                "                                    <div class=\"message-count bg-primary\">" + item.unread + "</div>\n" +
                                "                                    <small class=\"text-primary\">" + format(item.lastMessage.timestamp) + "</small>\n" +
                                "                                </div>\n" +
                                "                            </div>\n" +
                                "                        </li>"

                        }
                        $("#user-chat-list").append(string);
                    })
                },
                onFailed: function (error) { //è·å–å¤±è´¥
                    console.log("Failed to get the latest conversations, code:" + error.code + " content:" + error.content);
                },
            });
            var onConversationsUpdated = function (conversations) {
                console.log(conversations);
            };
            //ç›‘å¬ä¼šè¯åˆ—è¡¨æ›´æ–°
            im.on(GoEasy.IM_EVENT.CONVERSATIONS_UPDATED, onConversationsUpdated);
        }
    )

    // è·å–å¥½å‹åˆ—è¡¨
    let ifFriendListExists = false;
    $("#friend-list").click(function () {
        $.ajax({
            headers: {
                chattoken: localStorage.getItem("chattoken"),
            },
            url: requestUrl + "/friend_list/" + localStorage.getItem("userId"),
            type: "GET",
            contentType: "application/json;charset=UTF-8",
            success: function (data) {

                if (ifFriendListExists !== true) {
                    $.each(data, function (index, item) {
                        const string = "<li class='chat-list-item'>" +
                            "<figure class='avatar user-online'>" +
                            "<img src='images/user-2.png' alt='image'>" + "</figure>" + "<div class='list-body'>" + "<div class='chat-bttn'>"
                            + "<h3 class='mb-1 mt-1' id='friend-name' >" + item.friendName + "</h3 >" + "<p id='friend-motto'>" + item.friendMotto + "</p>" + "</div >" + "</div >" + "</li > ";
                        $("#friend-list-area").append(string)
                        ifFriendListExists = true;
                    })
                }
            },
            error: function (status) {
                console.log(status);
            },
        })
    })

    // å‘é€æ¶ˆæ¯
    $("#send-message").click(function () {
        //åˆ›å»ºæ¶ˆæ¯, å†…å®¹æœ€é•¿ä¸è¶…è¿‡3Kï¼Œå¯ä»¥å‘é€å­—ç¬¦ä¸²ï¼Œå¯¹è±¡å’Œjsonæ ¼å¼å­—ç¬¦ä¸²
        let textMessage = im.createTextMessage({
            text: $("#user-message").val(), //æ¶ˆæ¯å†…å®¹
            to: {
                type: GoEasy.IM_SCENE.PRIVATE, //ç§èŠè¿˜æ˜¯ç¾¤èŠï¼Œç¾¤èŠä¸ºGoEasy.IM_SCENE.GROUP
                id: 1,
                data: {
                    "avatar": "/www/xxx.png",
                    "nickname": "Neo"
                } //å¥½å‹æ‰©å±•æ•°æ®, ä»»æ„æ ¼å¼çš„å­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡ï¼Œç”¨äºæ›´æ–°ä¼šè¯åˆ—è¡¨conversation.data
            }
        });
        //å‘é€æ¶ˆæ¯
        im.sendMessage({
            message: textMessage,
            onSuccess: function (message) { //å‘é€æˆåŠŸ
                console.log("Private message sent successfully.", message);
            },
            onFailed: function (error) { //å‘é€å¤±è´¥
                console.log('Failed to send private messageï¼Œcode:' + error.code + ' ,error ' + error.content);
            }
        });
    })

    //è®¾ç½®å…·ä½“çš„èŠå¤©çª—å£
    $("#user-chat-list").on("click", "#chat-item", function () {
        
    })

</script>

</body>

</html>